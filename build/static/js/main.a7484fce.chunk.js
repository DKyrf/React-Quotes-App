(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return x}));var r=n(4),c=n(22),a=n(6),o="https://router-quotes-acf44-default-rtdb.firebaseio.com";function s(){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(Object(r.a)().mark((function e(){var t,n,a,s,u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/quotes.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}return e.abrupt("return",{quotes:[],error:t.statusText});case 8:for(s in a=[],n)u=Object(c.a)({id:s},n[s]),a.push(u);return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/quotes/").concat(t,".json"));case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw new Error("Couldn't fetch quote.");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/quotes.json"),{method:"POST",body:JSON.stringify(Object(c.a)({},t)),headers:{"Content-type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error("Could not feth quote.");case 8:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=Object(a.a)(Object(r.a)().mark((function e(t){var n,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/comments/").concat(t.id,".json"),{method:"POST",body:JSON.stringify(t.value),headers:{"Content-Type":"application/json"}});case 2:if(n=e.sent,c=n.json(),n.ok){e.next=6;break}throw new Error("Could not add comment.");case 6:return e.abrupt("return",{commentID:c.name});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(Object(r.a)().mark((function e(t){var n,c,a,s,u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/comments/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(c=e.sent,n.ok){e.next=8;break}throw new Error("Could get comments.");case 8:for(s in a=[],c)u={id:s,value:c[s]},a.push(u);return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(Object(r.a)().mark((function e(t,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{method:"POST",body:JSON.stringify({email:n.emailRef.current.value,password:n.passwordRef.current.value,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){var t="Something went wrong...";return e&&e.error&&e.error.message&&(t=e.error.message),{status:"ERR",data:t}}))})).then((function(e){return{status:e.status,token:e.idToken,message:e.data}})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(20),c=Object(r.b)({name:"newQuote",initialState:{author:"",text:"",isValid:!1,authTouched:!1,textTouched:!1,showComments:!1},reducers:{setAuth:function(e,t){e.authTouched=!0,e.author=t.payload},setText:function(e,t){e.textTouched=!0,e.text=t.payload},setValid:function(e,t){e.isValid=t.payload},reset:function(e){e.author="",e.text="",e.isValid=!1,e.authTouched=!1,e.textTouched=!1},authBlurHandler:function(e){e.authTouched=!1},textBlurHandler:function(e){e.textTouched=!1},setCommentsVisibility:function(e,t){e.showComments=t.payload}}}),a=c.reducer,o=c.actions},,function(e,t,n){e.exports={header:"MainNavigation_header__pcWBd",logo:"MainNavigation_logo__3mTft",nav:"MainNavigation_nav__2KJfX",active:"MainNavigation_active__oN3Ka"}},,,,,,,function(e,t,n){e.exports={form:"QuoteForm_form__3Ndw9",loading:"QuoteForm_loading__iDpS0",control:"QuoteForm_control__2lCiE",actions:"QuoteForm_actions__354La"}},,,,,function(e,t,n){e.exports={form:"NewCommentForm_form__2Te8b",loading:"NewCommentForm_loading__2veC2",control:"NewCommentForm_control__3NVeP",actions:"NewCommentForm_actions__2fwWP",cancel:"NewCommentForm_cancel__2j2FP","cancel--flat":"NewCommentForm_cancel--flat__1Ecta"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(20),c={token:localStorage.getItem("token"),isLoggedIn:!!localStorage.getItem("token"),error:null,expirationTime:localStorage.getItem("expirationTime")},a=Object(r.b)({name:"auth",initialState:c,reducers:{logIn:function(e,t){e.token=t.payload,e.isLoggedIn=!!t.payload,e.error=null,localStorage.setItem("token",t.payload.token)},logOut:function(e){e.token=null,e.isLoggedIn=!1,e.error=null,e.expirationTime=null,localStorage.removeItem("token"),localStorage.removeItem("expirationTime")},setErrorMessege:function(e,t){e.error=t.payload},calculateLogOutTime:function(e,t){var n=(new Date).getTime(),r=new Date(t.payload).getTime()-n;console.log(r),localStorage.setItem("expirationTime",r),e.expirationTime=r}}}),o=a.reducer,s=a.actions},function(e,t,n){"use strict";var r=n(50),c=n.n(r),a=n(1);t.a=function(){return Object(a.jsx)("div",{className:c.a.spinner})}},,,,function(e,t,n){"use strict";var r=n(0),c=n.n(r),a=n(47),o=n.n(a),s=n(1),u=function(e){return Object(s.jsxs)("figure",{className:o.a.quote,children:[Object(s.jsx)("p",{children:e.text}),Object(s.jsx)("figcaption",{children:e.author})]})};t.a=c.a.memo(u)},,,,,function(e,t,n){e.exports={list:"QuoteList_list__3pzcl",sorting:"QuoteList_sorting__rL6H1"}},,,,,,function(e,t,n){e.exports={main:"Layout_main__auk_r"}},function(e,t,n){e.exports={item:"QuoteItem_item__2dOvb"}},function(e,t,n){e.exports={quote:"HighlightedQuote_quote__nE9T6"}},function(e,t,n){e.exports={item:"CommentItem_item__24mbD"}},function(e,t,n){e.exports={comments:"Comments_comments__iZX-v"}},function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__2Kyqv"}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l})),n.d(t,"loader",(function(){return j}));var r=n(5),c=n(0),a=n(3),o=n(9),s=n(12),u=n(34),i=n(1);function l(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],l=Object(a.m)();return Object(i.jsxs)(c.Fragment,{children:[Object(i.jsx)("h1",{className:"centered",children:"QuoteDetail"}),l?Object(i.jsx)(u.a,{text:l.text,author:l.author}):Object(i.jsx)(a.a,{to:"/no-quote-existed",replace:!0}),n?Object(i.jsx)(a.b,{}):Object(i.jsx)(o.b,{onClick:function(){return s(!0)},className:"btn--flat centered",to:"comments",children:" Render comments "})]})}function j(e){return Object(s.e)(e.params.quoteID)}},function(e,t,n){e.exports={card:"Card_card__1m44e"}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w})),n.d(t,"action",(function(){return N}));var r=n(4),c=n(6),a=n(2),o=n(12),s=n(0),u=n.n(s),i=n(11),l=n(14);var j=n(9),d=n(30),m=n(52),b=n.n(m),h=n(1),f=function(e){return Object(h.jsx)("div",{className:b.a.card,children:e.children})},x=u.a.memo(f),O=n(23),p=n.n(O),g=!0,v=function(e){var t=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.newQuoteReducer})),n=t.author,r=t.text,c=t.isValid,a=t.authTouched,o=t.textTouched;return Object(s.useEffect)((function(){""!==n.trim()&&""!==r.trim()?e(l.a.setValid(!0)):e(l.a.setValid(!1))}),[e,n,r]),{authChangeHandler:function(t){e(l.a.setAuth(t.target.value))},textChangeHandler:function(t){e(l.a.setText(t.target.value))},authorBlur:function(){e(l.a.authBlurHandler())},textBlur:function(){e(l.a.textBlurHandler())},authValid:a&&""===n.trim()&&!c,textValid:o&&""===r.trim()&&!c}}(),n=t.authChangeHandler,r=t.textChangeHandler,c=t.authorBlur,a=t.textBlur,o=t.authValid,u=t.textValid;g=!1;var m=Object(i.c)((function(e){return e.newQuoteReducer}));return Object(h.jsx)(x,{children:Object(h.jsxs)(j.a,{className:p.a.form,method:"post",action:"/new-quote",children:[e.isLoading&&Object(h.jsx)("div",{className:p.a.loading,children:Object(h.jsx)(d.a,{})}),Object(h.jsxs)("div",{className:p.a.control,children:[Object(h.jsx)("label",{htmlFor:"author",children:"Author "}),Object(h.jsx)("input",{style:{backgroundColor:o&&!g?"pink":"white"},onBlur:c,onChange:n,type:"text",name:"author",id:"author"})]}),Object(h.jsxs)("div",{className:p.a.control,children:[Object(h.jsx)("label",{htmlFor:"text",children:"Text"}),Object(h.jsx)("textarea",{style:{backgroundColor:u&&!g?"pink":"white"},onBlur:a,onChange:r,name:"text",id:"text",rows:"5"})]}),Object(h.jsx)("div",{className:p.a.actions,children:Object(h.jsx)("button",{type:"submit",className:"btn",disabled:!m.isValid,children:"Add Quote"})})]})})},_=u.a.memo(v);function w(){return Object(h.jsx)(_,{})}function N(e){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(Object(r.a)().mark((function e(t){var n,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request.formData();case 2:return n=e.sent,c={author:n.get("author"),text:n.get("text")},e.prev=4,e.next=7,Object(o.d)(c);case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(4),console.log(e.t0),e.t0;case 13:return e.abrupt("return",Object(a.n)("/quotes"));case 15:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}},,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(42),c=n.n(r),a=n(11),o=n(20),s=n(14),u=n(29),i=Object(o.a)({reducer:{newQuoteReducer:s.b,authReducer:u.b}}),l=n(0),j=n.n(l),d=n(9),m=n(3),b=n(45),h=n.n(b),f=n(16),x=n.n(f),O=n(1);function p(){var e=Object(m.q)(),t=Object(a.b)(),n=Object(a.c)((function(e){return e.authReducer}));return Object(O.jsxs)("header",{className:x.a.header,children:[Object(O.jsx)("div",{className:x.a.logo,children:"Danylos Quotes"}),Object(O.jsx)("nav",{className:x.a.nav,children:Object(O.jsxs)("ul",{children:[Object(O.jsxs)("li",{children:[" ",Object(O.jsx)(d.c,{className:function(e){return e.isActive?x.a.active:""},to:"/quotes",children:" Quotes "})," "]}),n.isLoggedIn&&Object(O.jsxs)("li",{children:[" ",Object(O.jsx)(d.c,{className:function(e){return e.isActive?x.a.active:""},to:"/new-quote",children:" New Quotes "})," "]}),n.isLoggedIn?Object(O.jsx)("li",{children:Object(O.jsx)("button",{onClick:function(){t(u.a.logOut()),e("/quotes")},className:x.a.logOut,children:"Log Out"})}):Object(O.jsxs)("li",{children:[" ",Object(O.jsx)(d.c,{className:function(e){return e.isActive?x.a.active:""},to:"/auth_form",children:" Log In "})," "]})]})})]})}function g(){return Object(O.jsxs)(l.Fragment,{children:[Object(O.jsx)(p,{}),Object(O.jsx)("main",{className:h.a.main,children:Object(O.jsx)(m.b,{})})]})}var v=n(10),_=n(12),w=n(46),N=n.n(w),k=function(e){return Object(O.jsxs)("li",{className:N.a.item,children:[Object(O.jsxs)("figure",{children:[Object(O.jsx)("blockquote",{children:Object(O.jsx)("p",{children:e.text})}),Object(O.jsx)("figcaption",{children:e.author})]}),Object(O.jsx)(d.b,{to:"".concat(e.id),className:"btn",children:"View Fullscreen"})]})},y=j.a.memo(k),q=n(39),C=n.n(q),T=function(e){var t,n,r=Object(m.q)(),c=Object(m.n)(),a="asc"===new URLSearchParams(c.search).get("sort"),o=(t=e.quotes,n=a,Object(v.a)(t).sort((function(e,t){return n?e.id>t.id?1:-1:e.id<t.id?1:-1})));return Object(O.jsxs)(l.Fragment,{children:[Object(O.jsx)("div",{className:C.a.sorting,children:Object(O.jsxs)("button",{onClick:function(){r("/quotes?sort=".concat(a?"des":"asc"))},children:["Sorted ",a?"Ascending":"Decending"]})}),Object(O.jsx)("ul",{className:C.a.list,children:o.map((function(e){return Object(O.jsx)(y,{id:e.id,author:e.author,text:e.text},e.id)}))})]})},I=j.a.memo(T);function S(){return Object(_.b)()}function F(){var e=Object(m.m)();return Object(O.jsx)(I,{quotes:e})}var L=n(34),Q=n(5),D=n(48),V=n.n(D),R=function(e){return Object(O.jsx)("li",{className:V.a.item,children:Object(O.jsx)("p",{children:e.text})})},B=n(4),E=n(6),H=n(2),A=n(28),P=n.n(A),J=function(e){return Object(O.jsxs)(d.a,{className:P.a.form,method:"post",action:"/quotes/".concat(e.id,"/comments"),children:[Object(O.jsxs)("div",{className:P.a.control,children:[Object(O.jsx)("label",{htmlFor:"comment",children:"Your Comment"}),Object(O.jsx)("textarea",{minLength:"6",required:!0,id:"comment",rows:"5",name:"comment"})]}),Object(O.jsxs)("div",{className:P.a.actions,children:[Object(O.jsx)("button",{onClick:e.cancelHandler,className:"".concat(P.a.cancel," + btn"),children:"Cancel"}),Object(O.jsx)("button",{className:"btn",children:"Add Comment "})]})]})},z=j.a.memo(J);function M(e){return K.apply(this,arguments)}function K(){return(K=Object(E.a)(Object(B.a)().mark((function e(t){var n,r;return Object(B.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request.formData();case 2:return n=e.sent,r={id:t.params.quoteID,value:n.get("comment")},e.prev=4,e.next=7,Object(_.c)(r);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.abrupt("return",Object(H.n)("/quotes/".concat(t.params.quoteID,"/comments")));case 14:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}var W=n(49),X=n.n(W),U=function(){var e=Object(m.m)(),t=Object(l.useState)(),n=Object(Q.a)(t,2),r=n[0],c=n[1],a=Object(m.s)();return Object(O.jsxs)("section",{className:X.a.comments,children:[!r&&Object(O.jsx)("button",{className:"btn",onClick:function(){c(!0)},children:"Add a Comment"}),r&&Object(O.jsx)(z,{id:a.quoteID,cancelHandler:function(){return c(!1)}}),Object(O.jsx)("ul",{children:e.map((function(e){return Object(O.jsx)(R,{text:e.value},e.id)}))})]})};function Y(e){return Object(_.f)(e.params.quoteID)}var Z=n(30),G=n(51),$=n(53);var ee=function(){var e=Object(a.c)((function(e){return e.authReducer}));console.log(e);var t=j.a.lazy((function(){return Promise.resolve().then(n.bind(null,53))})),r=j.a.lazy((function(){return Promise.resolve().then(n.bind(null,51))})),c=j.a.lazy((function(){return n.e(3).then(n.bind(null,70))})),o=j.a.lazy((function(){return n.e(4).then(n.bind(null,71))})),s=Object(d.d)(Object(m.k)(Object(O.jsxs)(m.c,{path:"/",element:Object(O.jsx)(g,{}),errorElement:Object(O.jsx)(o,{}),children:[Object(O.jsx)(m.c,{index:!0,element:Object(O.jsx)(m.a,{to:"/quotes"})}),Object(O.jsx)(m.c,{path:"/quotes/*",element:Object(O.jsx)(F,{}),loader:S}),e.isLoggedIn&&Object(O.jsx)(m.c,{path:"/new-quote",element:Object(O.jsx)(t,{}),action:$.action}),Object(O.jsx)(m.c,{path:"/quotes/:quoteID/*",element:Object(O.jsx)(r,{}),loader:G.loader,children:Object(O.jsx)(m.c,{path:"comments",element:Object(O.jsx)(U,{}),loader:Y,action:M})}),Object(O.jsx)(m.c,{path:"/highlighted",element:Object(O.jsx)(L.a,{})}),Object(O.jsx)(m.c,{path:"/auth_form/*",element:Object(O.jsx)(c,{})}),Object(O.jsx)(m.c,{path:"*",element:Object(O.jsx)(m.a,{to:"/quotes"})})]})));return Object(O.jsx)(l.Suspense,{fallback:Object(O.jsxs)("div",{className:"centered",children:[" ",Object(O.jsx)(Z.a,{})," "]}),children:Object(O.jsx)(m.e,{router:s})})};n(66);c.a.createRoot(document.getElementById("root")).render(Object(O.jsx)(a.a,{store:i,children:Object(O.jsx)(ee,{})}))}],[[67,1,2]]]);
//# sourceMappingURL=main.a7484fce.chunk.js.map